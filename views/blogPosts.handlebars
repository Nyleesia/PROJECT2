<!-- Navbar content -->
<nav class="navbar navbar-expand-lg navbar-light bg-light" style="background-color: #e3f2fd;">
    <img src="https://user-images.githubusercontent.com/50628151/65193057-a5296f00-da47-11e9-98c0-999c8c2f781a.png"
        style="width:70px;">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent" style="font-family: moonsans; font-size: 25px;">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
                <a class="nav-link" id="account" href="/profile" style= "color: grey;">Account <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item active">
                <a class="nav-link" href="/projects">Projects <span class="sr-only">(current)</span></a>
            </li>
                <a class="nav-link" id="account" href="/blog" style= "color: teal;">Deeds Journal <span class="sr-only">(current)</span></a>
        </ul>
        <form class="form-inline my-2 my-lg-0 search">
            <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-secondary my-2 my-sm-0" type="submit"
                style="font-family: moonsans; font-size: 20px;">Search</button>
        </form>
    </div>
</nav>

	<div class="container">
	
	</div>

<!-- Code begins here -->
<script>

    $.get("/blog/allPosts").then(function (data) {
        console.log(data);
        if (data.length === 0) {
            var noProject = $("<div>").attr("class", "noBlogAppended");
            var words =
                '<div class="row"> ' +
			     '<div class="col-md-6 offset-md-3">' +
                "<h2>You currently do not have any blog posts. Take a peek at the latest blogs posted:   <a href='/blogs/allPosts'>HERE<a><h2>" +
                  '</div>' +
                '</div>';
            noProject.append(words);
            $(".container").append(noProject);
        } else {
            for (var i = 0; i < data.length; i++) {

                  var month;
                var day;
                var year;
                var dateSplit = data[i].createdAt.split("-");
                for (j = 0; j < dateSplit.length; j++) {
                    month = dateSplit[1];
                    day = dateSplit[2];
                    year = dateSplit[0];
                }

                time = data[i].createdAt.split(':'); // convert to array
                var hours = Number(time[0]);
                var minutes = Number(time[1]);
                var seconds = Number(time[2]);
                // calculate
                var timeValue;
                if (hours > 0 && hours <= 12) {
                    timeValue = "" + hours;
                } else if (hours > 12) {
                    timeValue = "" + (hours - 12);
                } else if (hours == 0) {
                    timeValue = "12";
                }
                timeValue += (minutes < 10) ? ":0" + minutes : ":" + minutes;  // get minutes
                timeValue += (hours >= 12) ? " P.M." : " A.M.";  // get AM/PM
        

                // send this data back
                var newBlog = '<div class="card" id="newProjectCard">' +
                    '<p class="card-text text-center">' + data[i].title + '</p>' +
                    '<img id="imageBlog" src="' + data[i].blogPhoto + '" class="card-img-top" alt="">' +
                    '<div class="card-body">' +
                    '<p class="detailsBlog">Details:' + data[i].blogPost + '</p>' +
                    '</div>' +
                    '<ul class="list-group list-group-flush">' +
                    '<li class="list-group-item">Poster: '+ data[i].userName + '</li>' +
                    '</ul>' +
                    '<div class="card-body">' +
                    '<a href="' + data[i].link + '" style="float:left;">' + data[i].link + '</a>' +
                    '<div class="hours" style="width:120px; height:75px; float:right;">Date:' + month + '/' + day + '/' + year + ', Time:' + timeValue + '</div>' + '</div>' +
                    `<button class="deletePost">Delete Post</button>'</div>'`;
                $(".container").prepend(newBlog);
            }


        }
    });

</script>
